	p68h11
	public	btasci
****************************************************************************************************************
* 		Binary to ASCII
* Transforma un numero en bcd a binario
* Parametros recibidos:  Inicio de número Binary por IX e Inicio de mdis por IY
* Parametros entregados: 
****************************************************************************************************************
	rseg	CODE
btasci	equ	*
 	psha
	pshb
	pshx
	pshy		;programación defensiva
	
	ldaa	0,x	
	lsla
	bcc	posit
	ldab	#$2D	;cargo el sibolo negativo -
	stab	0,y
	ldd	0,x	;cargo el numero a convertir
	coma	
	comb
	addd	#1	;complemento a dos de AccD
	ldx	#3	;cantidad de numeros a convertir
	pshx
	bra 	cargo

posit	ldd	0,x
	ldx	#4	;cantidad de numeros a convertir
	pshx
cargo	ldx	#10
	idiv
	addb	#$30	;corrección de número decimal a ASCII		
	stab	3,y
	dey
	xgdx
	pulx
	dex
	pshx
	bne	cargo
	pulx		;corrección de SP
	
	puly		;programación defensiva
	pulx
	pula	
	pulb
	rts

	END