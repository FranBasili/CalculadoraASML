	p68h11
	public	cargon,cargoop
	extern	secuizq
$const.def	
****************************************************************************************************************
* CARGON
*	
* Parametros recibidos: Origen de la cadena que contiene a operando 1, operador y operando 2 por IX, Ubicación 
*  del caracter a cargar por IY
* Parametros entregados: Nada
****************************************************************************************************************
	rseg	CODE

cargon	equ *
	psha
	pshb
	pshx
	pshy
    
	ldaa	4,x	; Cargo el operador actual
	bne	cargop2	; Si ya hay operando: cargo el segundo numero
	ldaa	1,x
	bne	fcargon	; si el operando 1 esta lleno doy por terminado la carga
	ldab	0,y	
	jsr	secuizq	; Cargo el nuevo digito en la memoria donde guardo los operandos en bcd
	
	ldab	#13	; Cargo en IX la dir de memoria de los display
	abx
	jsr	secuizq	; Cargo el nuevo digito al arreglo que muestra el display
	jmp	fcargon
	
cargop2	ldaa	6,x
	bne	fcargon	; si el operando 1 esta lleno doy por terminado la carga
	ldab	#5
	abx		; Apunto al comienzo del numero en bcd
	ldab	0,y		
	jsr	secuizq	; Cargo el nuevo digito en la memoria donde guardo los operandos en bcd
	ldab	#8
	abx
        ldab    0,y
	jsr	secuizq	; Cargo el nuevo digito al arreglo que muestra el display
	jmp	fcargon
   
fcargon puly
	pulx
	pulb
	pula
	rts

****************************************************************************************************************

****************************************************************************************************************
* CARGOOP
*Carga el operador en la memoria en bcd si no hay operador cargado
* Parametros recibidos: en orden de numero de memoria creciente: operador, dirección donde guardarlo,
*dir memorias mostrar. 
* Parametros entregados: Ninguno
****************************************************************************************************************
	rseg	CODE
cargoop	equ *
	
	psha
	pshx
	
	tsx
	ldx	6,x	; Cargo la direccion donde guardo el operando
	ldaa	0,x	; Cargo el operando actual
	bne	fcargop	; Si ya hay operando: termino la subrutina
	
	tsx	
	ldaa	5,x	; Cargo el caracter a agregar
	ldx	6,x	; Cargo la direccion donde tengo que guardarlo
	staa	0,x	; Guardo el caracter donde me piden
	
	tsx
	ldab	5,x
	ldx	8,x
	jsr	secuizq
	
	pulx
	pula
fcargop	rts

****************************************************************************************************************
	END
