	p68h11
	public	calculo
****************************************************************************************************************
* CALCULO
*	Si se pulso F (=) en el teclado llama a esta subrutina que se encarga de ver cuales son los operandos y 
*	 la operación y realizarla.
* Parametros recibidos: Inicio de número Binary por IX e Inicio de result por IY
* Parametros entregados: resultado de la opeación en result
****************************************************************************************************************
	rseg	CODE
calculo	equ	*
	psha
	pshb
	pshx
	pshy		;programación defensiva
	
	ldaa	#$2A	;comparo con los caracteres de multiplicación en ASCII
	cmpa	2,x
	beq	mula
	inca		;comparo con los caracteres de suma en ASCII
	cmpa	2,X	
	beq	suma
	inca		;comparo con el caracter que representará a la división en ASCII
	cmpa	2,X	
	beq	diva	;si no es ninguno de los anteriores tiene que restar 
****************************************************************************************************************	
resta	equ	*
	ldd	0,x
	addd	4,x	;4,x es el segundo operando en variables
	std	0,y
	bra	fin

****************************************************************************************************************
suma	equ	*
	ldd	0,x
	subd	4,x	;4,x es el segundo operando en variables
	std	0,y
	bra	fin
	
****************************************************************************************************************	
mula	equ	*
	ldd	#1111	;un indicador para saber que se invoco a la multiplicación
	std	0,y	;HAY QUE HACER ESTA SUBRUTINA!!!
	bra	fin
	
****************************************************************************************************************	
diva	equ	*
	ldd	0,x
	ldx	4,x	;4,x es el segundo operando en variables
	idiv
	xgdx
	std	0,y
****************************************************************************************************************	

fin	puly		;programación defensiva
	pulx
	pula	
	pulb
	rts
	
	END